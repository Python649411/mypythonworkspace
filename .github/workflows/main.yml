name: Build Kivy Android APK # 워크플로우 이름

on:
  push:
    branches:
      - main # main 브랜치에 푸시할 때마다 실행되게

jobs:
  build:
    runs-on: ubuntu-latest # 우분투 서버에서 돌릴 거야

    steps:
    - name: Checkout code
      uses: actions/checkout@v4 # 코드 가져오기

    - name: Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.9' # 파이썬 버전 맞춰주고

    - name: Set up Java JDK
      uses: actions/setup-java@v4
      with:
        distribution: 'temurin'
        java-version: '17' # 자바 버전도 맞춰주고

    - name: Install Buildozer # Buildozer 설치!
      run: pip install buildozer

    - name: Build Kivy APK # APK 빌드 명령!
      run: |
        buildozer android debug deploy run # 디버그 버전으로 빌드하는 명령어 (정확한건 너 buildozer.spec 봐야함)
        # buildozer init # 이걸 미리 로컬에서 해서 buildozer.spec 파일을 만들었어야 해!
    
    # - name: Upload APK artifact # 이건 APK를 GitHub Actions 빌드 결과로 저장하고 싶을 때 추가하는 거야
    #   uses: actions/upload-artifact@v4
    #   with:
    #     name: android-apk
    #     path: bin/*.apk # buildozer가 APK를 만드는 경로
