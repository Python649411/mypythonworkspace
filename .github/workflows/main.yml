# .github/workflows/main.yml íŒŒì¼ ë‚´ìš© ì‹œì‘
name: Kivy Android APK ë¹Œë“œ # ì´ ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„. GitHub Actions íƒ­ì—ì„œ ë³¼ ìˆ˜ ìˆìŒ

on:
  push:
    branches:
      - main # main ë¸Œëœì¹˜ì— ì½”ë“œë¥¼ í‘¸ì‹œ(push)í•  ë•Œë§ˆë‹¤ ì´ ë¹Œë“œê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¼!
      # - develop # ë§Œì•½ develop ë¸Œëœì¹˜ì—ë„ ì ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ì¶”ê°€í•´
  # workflow_dispatch: # ìˆ˜ë™ìœ¼ë¡œ ë¹Œë“œë¥¼ ì‹œì‘í•˜ê³  ì‹¶ì„ ë•Œ ì´ ì£¼ì„ì„ í’€ì–´ì£¼ì„¸ìš”.
                     # GitHub Actions íƒ­ì—ì„œ 'Run workflow' ë²„íŠ¼ì´ ìƒê²¨ìš”.

jobs:
  build_android_apk: # ë¹Œë“œ ì‘ì—…ì˜ ì´ë¦„
    runs-on: ubuntu-latest # ë¹Œë“œë¥¼ ì‹¤í–‰í•  ìš´ì˜ì²´ì œ í™˜ê²½. GitHubì—ì„œ ì œê³µí•˜ëŠ” ìµœì‹  ìš°ë¶„íˆ¬ ì„œë²„!

    steps:
    - name: ğŸ” ì½”ë“œ Checkout
      uses: actions/checkout@v4 # GitHub ë ˆí¬ì§€í† ë¦¬ì˜ ì½”ë“œë¥¼ ê°€ì ¸ì˜´

    - name: ğŸ Python ì„¤ì¹˜ ë° ì„¤ì •
      uses: actions/setup-python@v5
      with:
        python-version: '3.9' # Kivy ë° Buildozerê°€ ì˜ í˜¸í™˜ë˜ëŠ” Python 3.9 ë²„ì „ (í•„ìš”ì‹œ ì¡°ì ˆ)

    - name: â˜• Java JDK ì„¤ì¹˜ ë° ì„¤ì •
      uses: actions/setup-java@v4
      with:
        distribution: 'temurin' # AdoptOpenJDK ê³„ì—´ì˜ OpenJDK ë°°í¬íŒ
        java-version: '17' # Android ë¹Œë“œì— í•„ìš”í•œ Java 17 ë²„ì „ (ìµœì‹  ë¹Œë“œë¥¼ ìœ„í•´ ê¶Œì¥)

    - name: âš™ï¸ Buildozer ì„¤ì¹˜
      run: pip install buildozer # ë¹Œë“œë„ì € íŒ¨í‚¤ì§€ ì„¤ì¹˜

    - name: ğŸš€ Kivy APK ë¹Œë“œ ì‹œì‘!
      run: buildozer android debug # ëŒ€ë§ì˜ ì•ˆë“œë¡œì´ë“œ APK ë””ë²„ê·¸ ë¹Œë“œ ëª…ë ¹ì–´!

    - name: â¬†ï¸ ë¹Œë“œëœ APK ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ (ì„ íƒì‚¬í•­ì´ì§€ë§Œ ê°•ë ¥ ê¶Œì¥!)
      uses: actions/upload-artifact@v4 # ë¹Œë“œëœ íŒŒì¼ì„ GitHub Actions ê²°ê³¼ë¬¼ë¡œ ì—…ë¡œë“œí•˜ëŠ” ì•¡ì…˜
      with:
        name: ì ë©”ì¶”_ì•±_APK # ì—…ë¡œë“œë  íŒŒì¼ì˜ ì´ë¦„
        path: bin/*.apk # Buildozerê°€ APK íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ê¸°ë³¸ ê²½ë¡œ.
                        # ë¹Œë“œ í›„ ì´ ê²½ë¡œì— APK íŒŒì¼ì´ ìƒê¸¸ ê±°ì•¼!
